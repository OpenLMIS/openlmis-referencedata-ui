<div>
    <h2>{{'adminProductView.orderableDetails' | message}}</h2>
    <dl>
        <dt>{{'adminProductView.productCode' | message}}</dt>
        <dd>{{vm.product.productCode}}<dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.name' | message}}</dt>
        <dd>{{vm.product.fullProductName}}<dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.dispensingUnit' | message}}</dt>
        <dd>{{vm.product.dispensable.displayUnit}}<dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.packRoundingThreshold' | message}}</dt>
        <dd>{{vm.product.packRoundingThreshold}}<dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.netContent' | message}}</dt>
        <dd>{{vm.product.netContent}}<dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.roundToZero' | message}}</dt>
        <dd><i ng-class="{'icon-ok': vm.product.roundToZero, 'icon-remove': !vm.product.roundToZero}"></i><dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.description' | message}}</dt>
        <dd>{{vm.product.description}}<dd>
    </dl>
    <dl ng-if="vm.product.children && vm.product.children.length > 0">
        <dt>{{'adminProductView.productUnpackList' | message}} 
            </dt>
        <dd>
            <section class="openlmis-table-container">
                <button  style="float: right;"
                ng-click="vm.addKitContituents()">
                            {{'adminProductView.add' | message}}</button>
                <table suppress-tr-openlmis-invalid>
                    <thead>
                        <tr>
                            <th>{{'adminProductView.productCode' | message}}</th>
                            <th>{{'adminProductView.name' | message}}</th>
                            <th>{{'adminProductView.quantity' | message}}</th>
                            <th>{{'adminProductView.action' | message}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="kitConstituent in vm.product.children">
                            <td>{{kitConstituent.productCode}}</td>
                            <td>{{kitConstituent.fullProductName}}</td>
                            <td><input type="number" ng-name="" ng-change="vm.validateQuantity(kitConstituent)" 
                             ng-class="{'error': kitConstituent.$errors.quantityInvalid}" ng-model="kitConstituent.quantity" required></td>
                            <td><button ng-click="vm.removeKitContituent(kitConstituent)">
                            {{'adminProductView.delete' | message}}</button></td>
                        </tr> 
                    </tbody>
                </table>

            </section>
        </dd>
    </dl>
    <dl>
        <dt>{{'adminProductView.associatedPrograms' | message}}</dt>
        <dd>
            <section class="openlmis-table-container">
                <table>
                    <caption ng-if="!vm.product.programs || vm.product.programs.length === 0">
                        {{'adminProductView.noAssociatedPrograms' | message}}
                    </caption>
                    <thead>
                        <tr>
                            <th>{{'adminProductView.programName' | message}}</th>
                            <th>{{'adminProductView.productCode' | message}}</th>
                            <th>{{'adminProductView.active' | message}}</th>
                            <th>{{'adminProductView.displayOrder' | message}}</th>
                            <th>{{'adminProductView.dosesPerPatient' | message}}</th>
                            <th>{{'adminProductView.fullSupply' | message}}</th>
                            <th>{{'adminProductView.pricePerPack' | message}}</th>
                            <th>{{'adminProductView.orderableCategoryDisplayName' | message}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="program in vm.product.programs">
                            <td>{{program.$program.name}}</td>
                            <td>{{vm.product.productCode}}</td>
                            <td>
                                <i ng-class="{'icon-ok': program.active, 'icon-remove': !program.active}"></i>
                            </td>
                            <td>{{program.displayOrder}}</td>
                            <td>{{program.dosesPerPatient}}</td>
                            <td>
                                <i ng-class="{'icon-ok': program.fullSupply, 'icon-remove': !program.fullSupply}"></i>
                            </td>
                            <td>{{program.pricePerPack}}</td>
                            <td>{{program.orderableCategoryDisplayName}}</td>
                        </tr>
                    </tbody>
                </table>
            </section>
        <dd>
    </dl>
    <div class="openlmis-toolbar">
        <button ui-sref="^">{{'adminProductView.cancel' | message}}</button>
        <div class="button-group primary">
            <button class="primary"  type="submit" ng-if="vm.product.children.length > 0" ng-click="vm.save()">{{'adminProductView.saveKitUnpackList' | message}}</button>
            <button class="primary" ng-if="vm.product.children.length === 0" ng-click="vm.addKitContituents()">{{'adminProductView.addKitUnpackList' | message}}</button>
        </div>
    </div>
</div>
