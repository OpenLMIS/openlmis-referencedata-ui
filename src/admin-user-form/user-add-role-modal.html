<div class="modal add-role" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" aria-label="Close" ng-click="$hide()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title">{{'adminUserForm.addRole'| message}}</h4>
                </div>
                <div class="modal-body">
                    <form id="addRoleForm" name="addRoleForm" class="user-form" ng-submit="vm.addRole()">
                        <label>
                            <span>{{'adminUserForm.username' | message}}</span>
                            <span>{{vm.user.username}}</span>
                        </label>
                        <fieldset>
                            <label for="type">{{'adminUserForm.type' | message}}</label>
                            <select id="type" ng-model="vm.newRoleAssignment.type"
                                    ng-options="type for type in vm.types"
                                    ng-change="vm.loadRoles()" required>
                            </select>
                            <label for="role">{{'adminUserForm.role' | message}}</label>
                            <select id="role" ng-model="vm.newRoleAssignment.role"
                                    ng-options="role.name for role in vm.filteredRoles" required>
                            </select>
                            <p ng-if="vm.newRoleAssignment.role">{{vm.newRoleAssignment.role.description}}</p>
                        </fieldset>
                        <fieldset class="required" ng-if="vm.isSupervisionType()">
                            <div>
                                <select id="required" ng-model="vm.requiredField" ng-change="vm.clearSupervisionFields()"
                                    ng-init="vm.requiredField = vm.supervisionFields[0]" required
                                    ng-options="requiredField as requiredField.required.message for requiredField in vm.supervisionFields">
                                </select>
                            </div>
                            <div>
                                <select id="required" ng-model="vm.newRoleAssignment[vm.requiredField.required.value]"
                                        ng-options="required.code as required[vm.requiredField.required.display] for required in vm[vm.requiredField.required.list]" required>
                                </select>
                            </div>
                        </fieldset>
                        <fieldset ng-if="vm.isSupervisionType()">
                            <label for="optional">{{vm.requiredField.optional.message}}</label>
                            <select id="optional" ng-model="vm.newRoleAssignment[vm.requiredField.optional.value]"
                                    ng-options="optional.code as optional[vm.requiredField.optional.display] for optional in vm[vm.requiredField.optional.list]">
                            </select>
                        </fieldset>
                        <fieldset ng-if="vm.isFulfillmentType()">
                            <label for="warehouse">{{'adminUserForm.warehouse' | message}}</label>
                            <select id="warehouse" ng-model="vm.newRoleAssignment.warehouse"
                                    ng-options="warehouse.code as warehouse.name for warehouse in vm.warehouses" required>
                            </select>
                        </fieldset>
                    </form>
                </div>
                <div class="modal-footer">
                    <button ng-click="$hide()">{{'adminUserForm.cancel' | message}}</button>
                    <input form="addRoleForm" type="submit" value="{{'adminUserForm.addRole'| message}}"/>
                </div>
        </div>
    </div>
</div>
